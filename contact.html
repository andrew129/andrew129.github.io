<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Contact Me</title>
    <link rel="stylesheet" href="assets/contact.css">
    <script src="https://use.fontawesome.com/e768a315de.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Great+Vibes&family=Sacramento&family=Yellowtail&display=swap" rel="stylesheet">
</head>
<body>
    <header class='header'>
        <div class='title'>
            <div class='title-names'>
                <h1 id='name'>Andrew Stiles</h1>
                <p id='position'></p>
            </div>
        </div>
        <ul class='navigation'>
            <li><a href="./index.html"><button>About Me</button></a></li>
            <li><a href="./portfolio.html"><button>Portfolio</button></a></li>
            <li><a href="./contact.html"><button>Contact</button></a></li>
            <li><a target="blank" href="Andrews Resume.pdf"><button>Resume</button></a></li>
        </ul>
        <div class='links dom'>
            <p id='sites'>Check Out my Sites</p>
            <div class='icons'>
                <a class='btn' target='blank' href="https://github.com/andrew129"><i class="fa fa-2x fa-github" style='color: black;' aria-hidden="true"></i></a>
                <a class='btn' target='blank' href="https://www.linkedin.com/in/andrew-stiles-12b41167"><i class="fa fa-2x fa-linkedin-square" style='color: black;' aria-hidden="true"></i></a>
                <a class='btn' target='blank' href='https://soundcloud.com/en1gmamusic/tracks'><i class="fa fa-2x fa-soundcloud" style='color: black;' aria-hidden="true"></i></a>
                <a class='btn' target='blank' href='mailto:ndrwstls544@gmail.com'><i class='fa fa-2x fa-envelope' style='color: black;' aria-hidden="true"></i></a>
            </div>
        </div>
    </header>
    <div class='new-row'>
        <div class='main-content'>
            <div id='contact-div'>
                <h1 id='contact'>Contact Me</h1>
            </div>
            <form class='submit-form' action="https://formspree.io/xjvagyzj" method='POST'>
                <input type='text' id='yourname' name='subject' placeholder="Your Subject...">
                <input type='text' id='email' name='email' placeholder="Your Email...">
                <textarea type='text' id='message' name='message' placeholder="Write something here...">
                </textarea>
            
                <button type='submit' id='submit' name='submit' value='submit'>Send Email</button>
            </form>
            <div id='status-div'>
                <p id='status'><mark></mark></p>
            </div>
        </div>
    </div>
    <script>
        let positionArr = ['Full Stack Web Developer', 'Tutor', 'Music Producer'];
        let count = 0;
        let position = document.getElementById('position');

        function slideShow() {
            increment()
            setInterval(increment, 4000)
        }
        
        function increment() {
            position.textContent = positionArr[count]
            if (count === positionArr.length - 1) {
                count = 0
            }
            else {
                count++
            }
        }

        function sendEmail(e) {
            const name = document.getElementById('yourname').value.trim()
            const email = document.getElementById('email').value.trim()
            const message = document.getElementById('message').value.trim()
            const status = document.getElementById('status')

            name.value = ''
            email.value = ''
            message.value = ''
            status.textContent = ''

            if (name !== '' && email !== '' && message !== '' && email.includes('@') && email.includes('.') && message.length > 5 && name.length > 2) {
                console.log('submit')
            }
            else if (name === '' || email === '' || message === '') {
                e.preventDefault()
                status.textContent = 'Error: Make sure all fields are filled out'
            }
            else if (!email.includes('@') || !email.includes('.')) {
                e.preventDefault()
                status.textContent = 'Error: Your email is invalid'
            }
            else if (message.length < 5) {
                e.preventDefault()
                status.textContent = 'Error: Your Message is too short'
            }
            else if (name.length < 2) {
                e.preventDefault()
                status.textContent = 'Error: Your Subject is too Short'
            }
        }

        slideShow()
        document.getElementById('submit').addEventListener('click', sendEmail)
    </script>
</body>
</html>